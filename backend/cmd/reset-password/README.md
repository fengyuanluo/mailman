# 用户密码重置工具

这是一个命令行工具，用于重置 Mailman 系统中指定用户的密码。

## 功能特性

- 支持通过用户名或邮箱地址查找用户
- 安全的密码输入（不显示明文）
- 密码确认验证
- 用户信息显示
- 可选的强制模式（跳过确认）
- 自动激活被禁用的用户（可选）

## 构建

在 `backend` 目录下运行：

```bash
go build -o reset-password ./cmd/reset-password
```

## 使用方法

### 基本用法

通过用户名重置密码：
```bash
./reset-password -username=admin
```

通过邮箱重置密码：
```bash
./reset-password -email=admin@example.com
```

### 高级用法

强制重置（跳过确认）：
```bash
./reset-password -username=admin -force
```

直接指定新密码（不推荐，不安全）：
```bash
./reset-password -username=admin -password=newpassword123
```

## 参数说明

- `-username`: 指定要重置密码的用户名
- `-email`: 指定要重置密码的邮箱地址
- `-password`: 新密码（如果不指定，将提示安全输入）
- `-force`: 强制重置，跳过确认步骤

## 注意事项

1. **安全性**: 建议不要在命令行中直接输入密码，而是使用交互式输入
2. **权限**: 需要有数据库访问权限
3. **配置**: 工具会自动读取系统配置文件来连接数据库
4. **密码要求**: 新密码长度至少需要6个字符
5. **用户状态**: 如果用户被禁用，工具会询问是否激活该用户

## 示例输出

```
找到用户:
  ID: 1
  用户名: admin
  邮箱: admin@example.com
  状态: 激活
  创建时间: 2024-01-01 10:00:00
  最后登录: 2024-01-15 14:30:00

确定要重置用户 'admin' 的密码吗？(y/N): y
请输入新密码: 
请再次输入新密码: 
✅ 用户 'admin' 的密码已成功重置
密码重置完成！
```

## 错误处理

工具会处理以下常见错误：
- 用户不存在
- 数据库连接失败
- 密码不匹配
- 密码长度不足
- 权限不足

## 环境要求

- Go 1.23+
- 有效的数据库配置
- 适当的文件系统权限
